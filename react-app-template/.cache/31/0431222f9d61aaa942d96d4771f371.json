{"id":"UZDz","dependencies":[{"name":"/home/sengul/Documents/Projects/Ltc/3dMDWebsocket/react-app-template/node_modules/react-use-websocket/dist/lib/create-or-join.js.map","includedInParent":true,"mtime":1679124831164},{"name":"/home/sengul/Documents/Projects/Ltc/3dMDWebsocket/react-app-template/node_modules/react-use-websocket/src/lib/create-or-join.ts","includedInParent":true,"mtime":1679124831176},{"name":"/home/sengul/Documents/Projects/Ltc/3dMDWebsocket/react-app-template/package.json","includedInParent":true,"mtime":1679124831384},{"name":"/home/sengul/Documents/Projects/Ltc/3dMDWebsocket/react-app-template/.babelrc","includedInParent":true,"mtime":1637703918124},{"name":"/home/sengul/Documents/Projects/Ltc/3dMDWebsocket/react-app-template/node_modules/react-use-websocket/package.json","includedInParent":true,"mtime":1679124831164},{"name":"./globals","loc":{"line":4,"column":24,"index":138},"parent":"/home/sengul/Documents/Projects/Ltc/3dMDWebsocket/react-app-template/node_modules/react-use-websocket/dist/lib/create-or-join.js","resolved":"/home/sengul/Documents/Projects/Ltc/3dMDWebsocket/react-app-template/node_modules/react-use-websocket/dist/lib/globals.js"},{"name":"./constants","loc":{"line":5,"column":26,"index":178},"parent":"/home/sengul/Documents/Projects/Ltc/3dMDWebsocket/react-app-template/node_modules/react-use-websocket/dist/lib/create-or-join.js","resolved":"/home/sengul/Documents/Projects/Ltc/3dMDWebsocket/react-app-template/node_modules/react-use-websocket/dist/lib/constants.js"},{"name":"./attach-listener","loc":{"line":6,"column":32,"index":226},"parent":"/home/sengul/Documents/Projects/Ltc/3dMDWebsocket/react-app-template/node_modules/react-use-websocket/dist/lib/create-or-join.js","resolved":"/home/sengul/Documents/Projects/Ltc/3dMDWebsocket/react-app-template/node_modules/react-use-websocket/dist/lib/attach-listener.js"},{"name":"./attach-shared-listeners","loc":{"line":7,"column":40,"index":288},"parent":"/home/sengul/Documents/Projects/Ltc/3dMDWebsocket/react-app-template/node_modules/react-use-websocket/dist/lib/create-or-join.js","resolved":"/home/sengul/Documents/Projects/Ltc/3dMDWebsocket/react-app-template/node_modules/react-use-websocket/dist/lib/attach-shared-listeners.js"},{"name":"./manage-subscribers","loc":{"line":8,"column":35,"index":353},"parent":"/home/sengul/Documents/Projects/Ltc/3dMDWebsocket/react-app-template/node_modules/react-use-websocket/dist/lib/create-or-join.js","resolved":"/home/sengul/Documents/Projects/Ltc/3dMDWebsocket/react-app-template/node_modules/react-use-websocket/dist/lib/manage-subscribers.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.createOrJoinSocket=void 0;var e=require(\"./globals\"),r=require(\"./constants\"),t=require(\"./attach-listener\"),o=require(\"./attach-shared-listeners\"),n=require(\"./manage-subscribers\"),c=function(t,o,c,s,a){return function(){if(n.removeSubscriber(t,o),!n.hasSubscribers(t)){try{var u=e.sharedWebSockets[t];u instanceof WebSocket&&(u.onclose=function(e){c.current.onClose&&c.current.onClose(e),s(r.ReadyState.CLOSED)}),u.close()}catch(i){}a&&a(),delete e.sharedWebSockets[t]}}};exports.createOrJoinSocket=function(s,a,u,i,S,d,b,v){if(!r.isEventSourceSupported&&i.current.eventSourceOptions)throw r.isReactNative?new Error(\"EventSource is not supported in ReactNative\"):new Error(\"EventSource is not supported\");if(i.current.share){var h=null;void 0===e.sharedWebSockets[a]?(e.sharedWebSockets[a]=i.current.eventSourceOptions?new EventSource(a,i.current.eventSourceOptions):new WebSocket(a,i.current.protocols),s.current=e.sharedWebSockets[a],u(r.ReadyState.CONNECTING),h=o.attachSharedListeners(e.sharedWebSockets[a],a,i,v)):(s.current=e.sharedWebSockets[a],u(e.sharedWebSockets[a].readyState));var p={setLastMessage:S,setReadyState:u,optionsRef:i,reconnectCount:b,reconnect:d};return n.addSubscriber(a,p),c(a,p,i,u,h)}if(s.current=i.current.eventSourceOptions?new EventSource(a,i.current.eventSourceOptions):new WebSocket(a,i.current.protocols),u(r.ReadyState.CONNECTING),!s.current)throw new Error(\"WebSocket failed to be created\");return t.attachListeners(s.current,{setLastMessage:S,setReadyState:u},i,d.current,b,v)};","map":{"mappings":[{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":102}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":106}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":108}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":116}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":129}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":131}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":139}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":154}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":156}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":164}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":185}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":187}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":195}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":224}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":226}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":234}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":11,"column":6},"generated":{"line":1,"column":258}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":11,"column":25},"generated":{"line":1,"column":260}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":12,"column":2},"generated":{"line":1,"column":269}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":13,"column":2},"generated":{"line":1,"column":271}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":14,"column":2},"generated":{"line":1,"column":273}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":15,"column":2},"generated":{"line":1,"column":275}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":16,"column":2},"generated":{"line":1,"column":277}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":18,"column":2},"generated":{"line":1,"column":280}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":18,"column":9},"generated":{"line":1,"column":287}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":20,"column":4},"generated":{"line":1,"column":298}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":19,"column":4},"generated":{"line":1,"column":301}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":19,"column":4},"generated":{"line":1,"column":303}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":19,"column":21},"generated":{"line":1,"column":320}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":19,"column":26},"generated":{"line":1,"column":322}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":20,"column":9},"generated":{"line":1,"column":326}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":20,"column":9},"generated":{"line":1,"column":328}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":20,"column":24},"generated":{"line":1,"column":343}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":20,"column":30},"generated":{"line":1,"column":346}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":21,"column":6},"generated":{"line":1,"column":347}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":22,"column":8},"generated":{"line":1,"column":351}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":22,"column":14},"generated":{"line":1,"column":355}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":22,"column":27},"generated":{"line":1,"column":357}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":22,"column":27},"generated":{"line":1,"column":359}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":22,"column":44},"generated":{"line":1,"column":376}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":23,"column":12},"generated":{"line":1,"column":379}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":23,"column":34},"generated":{"line":1,"column":392}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":24,"column":10},"generated":{"line":1,"column":404}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":24,"column":21},"generated":{"line":1,"column":406}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":24,"column":31},"generated":{"line":1,"column":414}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":24,"column":32},"generated":{"line":1,"column":423}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":25,"column":16},"generated":{"line":1,"column":426}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":25,"column":27},"generated":{"line":1,"column":428}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":25,"column":35},"generated":{"line":1,"column":436}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":26,"column":14},"generated":{"line":1,"column":445}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":26,"column":25},"generated":{"line":1,"column":447}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":26,"column":33},"generated":{"line":1,"column":455}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":26,"column":41},"generated":{"line":1,"column":463}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":28,"column":12},"generated":{"line":1,"column":466}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":28,"column":26},"generated":{"line":1,"column":468}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":28,"column":26},"generated":{"line":1,"column":470}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":28,"column":37},"generated":{"line":1,"column":481}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":31,"column":8},"generated":{"line":1,"column":491}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":31,"column":19},"generated":{"line":1,"column":493}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":32,"column":8},"generated":{"line":1,"column":501}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":32,"column":15},"generated":{"line":1,"column":507}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":35,"column":10},"generated":{"line":1,"column":511}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":35,"column":37},"generated":{"line":1,"column":514}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":37,"column":13},"generated":{"line":1,"column":525}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":37,"column":13},"generated":{"line":1,"column":527}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":37,"column":30},"generated":{"line":1,"column":544}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":42,"column":13},"generated":{"line":1,"column":550}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":42,"column":13},"generated":{"line":1,"column":558}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":42,"column":34},"generated":{"line":1,"column":577}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":43,"column":2},"generated":{"line":1,"column":586}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":44,"column":2},"generated":{"line":1,"column":588}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":45,"column":2},"generated":{"line":1,"column":590}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":46,"column":2},"generated":{"line":1,"column":592}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":47,"column":2},"generated":{"line":1,"column":594}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":48,"column":2},"generated":{"line":1,"column":596}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":49,"column":2},"generated":{"line":1,"column":598}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":50,"column":2},"generated":{"line":1,"column":600}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":52,"column":2},"generated":{"line":1,"column":603}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":52,"column":7},"generated":{"line":1,"column":607}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":52,"column":7},"generated":{"line":1,"column":609}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":52,"column":33},"generated":{"line":1,"column":633}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":52,"column":44},"generated":{"line":1,"column":635}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":52,"column":52},"generated":{"line":1,"column":643}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":53,"column":4},"generated":{"line":1,"column":662}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":53,"column":8},"generated":{"line":1,"column":668}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":53,"column":8},"generated":{"line":1,"column":670}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":54,"column":12},"generated":{"line":1,"column":684}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":54,"column":16},"generated":{"line":1,"column":688}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":54,"column":22},"generated":{"line":1,"column":694}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":56,"column":12},"generated":{"line":1,"column":741}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":56,"column":16},"generated":{"line":1,"column":745}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":56,"column":22},"generated":{"line":1,"column":751}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":60,"column":2},"generated":{"line":1,"column":783}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":60,"column":6},"generated":{"line":1,"column":786}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":60,"column":17},"generated":{"line":1,"column":788}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":60,"column":25},"generated":{"line":1,"column":796}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":60,"column":32},"generated":{"line":1,"column":802}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":61,"column":4},"generated":{"line":1,"column":803}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":61,"column":8},"generated":{"line":1,"column":807}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":61,"column":59},"generated":{"line":1,"column":809}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":62,"column":34},"generated":{"line":1,"column":819}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":62,"column":8},"generated":{"line":1,"column":823}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":62,"column":8},"generated":{"line":1,"column":825}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":62,"column":25},"generated":{"line":1,"column":842}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":63,"column":6},"generated":{"line":1,"column":846}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":63,"column":6},"generated":{"line":1,"column":848}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":63,"column":23},"generated":{"line":1,"column":865}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":63,"column":30},"generated":{"line":1,"column":868}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":63,"column":41},"generated":{"line":1,"column":870}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":63,"column":49},"generated":{"line":1,"column":878}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":64,"column":8},"generated":{"line":1,"column":897}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":64,"column":12},"generated":{"line":1,"column":901}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":64,"column":24},"generated":{"line":1,"column":913}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":64,"column":29},"generated":{"line":1,"column":915}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":64,"column":40},"generated":{"line":1,"column":917}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":64,"column":48},"generated":{"line":1,"column":925}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":65,"column":8},"generated":{"line":1,"column":945}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":65,"column":12},"generated":{"line":1,"column":949}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":65,"column":22},"generated":{"line":1,"column":959}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":65,"column":27},"generated":{"line":1,"column":961}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":65,"column":38},"generated":{"line":1,"column":963}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":65,"column":46},"generated":{"line":1,"column":971}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":66,"column":6},"generated":{"line":1,"column":982}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":66,"column":19},"generated":{"line":1,"column":984}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":66,"column":29},"generated":{"line":1,"column":992}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":66,"column":29},"generated":{"line":1,"column":994}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":66,"column":46},"generated":{"line":1,"column":1011}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":67,"column":6},"generated":{"line":1,"column":1014}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":67,"column":20},"generated":{"line":1,"column":1016}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":67,"column":20},"generated":{"line":1,"column":1018}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":67,"column":31},"generated":{"line":1,"column":1029}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":68,"column":6},"generated":{"line":1,"column":1041}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":68,"column":34},"generated":{"line":1,"column":1043}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":68,"column":34},"generated":{"line":1,"column":1045}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":69,"column":8},"generated":{"line":1,"column":1067}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":69,"column":8},"generated":{"line":1,"column":1069}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":69,"column":25},"generated":{"line":1,"column":1086}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":70,"column":8},"generated":{"line":1,"column":1089}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":71,"column":8},"generated":{"line":1,"column":1091}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":72,"column":8},"generated":{"line":1,"column":1093}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":75,"column":6},"generated":{"line":1,"column":1098}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":75,"column":19},"generated":{"line":1,"column":1100}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":75,"column":29},"generated":{"line":1,"column":1108}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":75,"column":29},"generated":{"line":1,"column":1110}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":75,"column":46},"generated":{"line":1,"column":1127}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":76,"column":6},"generated":{"line":1,"column":1130}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":76,"column":20},"generated":{"line":1,"column":1132}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":76,"column":20},"generated":{"line":1,"column":1134}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":76,"column":37},"generated":{"line":1,"column":1151}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":76,"column":42},"generated":{"line":1,"column":1154}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":79,"column":4},"generated":{"line":1,"column":1167}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":79,"column":10},"generated":{"line":1,"column":1171}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":79,"column":35},"generated":{"line":1,"column":1173}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":80,"column":6},"generated":{"line":1,"column":1174}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":80,"column":20},"generated":{"line":1,"column":1189}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":81,"column":6},"generated":{"line":1,"column":1191}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":81,"column":19},"generated":{"line":1,"column":1205}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":82,"column":6},"generated":{"line":1,"column":1207}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":82,"column":16},"generated":{"line":1,"column":1218}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":83,"column":6},"generated":{"line":1,"column":1220}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":83,"column":20},"generated":{"line":1,"column":1235}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":84,"column":6},"generated":{"line":1,"column":1237}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":84,"column":17},"generated":{"line":1,"column":1247}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":89,"column":4},"generated":{"line":1,"column":1250}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":87,"column":4},"generated":{"line":1,"column":1257}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":87,"column":4},"generated":{"line":1,"column":1259}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":87,"column":18},"generated":{"line":1,"column":1273}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":87,"column":23},"generated":{"line":1,"column":1275}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":89,"column":11},"generated":{"line":1,"column":1278}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":90,"column":6},"generated":{"line":1,"column":1280}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":91,"column":6},"generated":{"line":1,"column":1282}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":92,"column":6},"generated":{"line":1,"column":1284}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":93,"column":6},"generated":{"line":1,"column":1286}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":94,"column":6},"generated":{"line":1,"column":1288}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":101,"column":4},"generated":{"line":1,"column":1291}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":97,"column":4},"generated":{"line":1,"column":1294}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":97,"column":17},"generated":{"line":1,"column":1296}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":97,"column":27},"generated":{"line":1,"column":1304}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":97,"column":38},"generated":{"line":1,"column":1306}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":97,"column":46},"generated":{"line":1,"column":1314}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":98,"column":6},"generated":{"line":1,"column":1333}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":98,"column":10},"generated":{"line":1,"column":1337}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":98,"column":22},"generated":{"line":1,"column":1349}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":98,"column":27},"generated":{"line":1,"column":1351}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":98,"column":38},"generated":{"line":1,"column":1353}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":98,"column":46},"generated":{"line":1,"column":1361}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":99,"column":6},"generated":{"line":1,"column":1381}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":99,"column":10},"generated":{"line":1,"column":1385}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":99,"column":20},"generated":{"line":1,"column":1395}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":99,"column":25},"generated":{"line":1,"column":1397}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":99,"column":36},"generated":{"line":1,"column":1399}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":99,"column":44},"generated":{"line":1,"column":1407}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":100,"column":4},"generated":{"line":1,"column":1418}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":100,"column":18},"generated":{"line":1,"column":1420}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":100,"column":18},"generated":{"line":1,"column":1422}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":100,"column":29},"generated":{"line":1,"column":1433}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":101,"column":9},"generated":{"line":1,"column":1446}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":101,"column":22},"generated":{"line":1,"column":1448}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":102,"column":6},"generated":{"line":1,"column":1456}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":102,"column":12},"generated":{"line":1,"column":1462}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":102,"column":16},"generated":{"line":1,"column":1466}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":102,"column":22},"generated":{"line":1,"column":1472}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":105,"column":4},"generated":{"line":1,"column":1506}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":105,"column":11},"generated":{"line":1,"column":1513}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":105,"column":11},"generated":{"line":1,"column":1515}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":106,"column":6},"generated":{"line":1,"column":1531}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":106,"column":19},"generated":{"line":1,"column":1533}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":107,"column":6},"generated":{"line":1,"column":1541}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":108,"column":8},"generated":{"line":1,"column":1542}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":108,"column":22},"generated":{"line":1,"column":1557}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":109,"column":8},"generated":{"line":1,"column":1559}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":109,"column":21},"generated":{"line":1,"column":1573}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":111,"column":6},"generated":{"line":1,"column":1576}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":112,"column":6},"generated":{"line":1,"column":1578}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":112,"column":15},"generated":{"line":1,"column":1580}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":113,"column":6},"generated":{"line":1,"column":1588}},{"source":"../../src/lib/create-or-join.ts","name":null,"original":{"line":114,"column":6},"generated":{"line":1,"column":1590}}],"sources":{"../../src/lib/create-or-join.ts":"import { MutableRefObject } from 'react';\nimport { sharedWebSockets } from './globals';\nimport { Options, SendMessage, Subscriber, WebSocketLike } from './types';\nimport { isEventSourceSupported, ReadyState, isReactNative } from './constants';\nimport { attachListeners } from './attach-listener';\nimport { attachSharedListeners } from './attach-shared-listeners';\nimport { addSubscriber, removeSubscriber, hasSubscribers } from './manage-subscribers';\n\n//TODO ensure that all onClose callbacks are called\n\nconst cleanSubscribers = (\n  url: string,\n  subscriber: Subscriber,\n  optionsRef: MutableRefObject<Options>,\n  setReadyState: (readyState: ReadyState) => void,\n  clearSocketIoPingInterval: (() => void) | null,\n) => {\n  return () => {\n    removeSubscriber(url, subscriber);\n    if (!hasSubscribers(url)) {\n      try {\n        const socketLike = sharedWebSockets[url];\n        if (socketLike instanceof WebSocket) {\n          socketLike.onclose = (event: WebSocketEventMap['close']) => {\n            if (optionsRef.current.onClose) {\n              optionsRef.current.onClose(event);\n            }\n            setReadyState(ReadyState.CLOSED);\n          };\n        }\n        socketLike.close();\n      } catch (e) {\n\n      }\n      if (clearSocketIoPingInterval) clearSocketIoPingInterval();\n\n      delete sharedWebSockets[url];\n    }\n  }\n};\n\nexport const createOrJoinSocket = (\n  webSocketRef: MutableRefObject<WebSocketLike | null>,\n  url: string,\n  setReadyState: (readyState: ReadyState) => void,\n  optionsRef: MutableRefObject<Options>,\n  setLastMessage: (message: WebSocketEventMap['message']) => void,\n  startRef: MutableRefObject<() => void>,\n  reconnectCount: MutableRefObject<number>,\n  sendMessage: SendMessage,\n): (() => void) => {\n  if (!isEventSourceSupported && optionsRef.current.eventSourceOptions) {\n    if (isReactNative) {\n      throw new Error('EventSource is not supported in ReactNative');\n    } else {\n      throw new Error('EventSource is not supported');\n    }\n  }\n\n  if (optionsRef.current.share) {\n    let clearSocketIoPingInterval: ((() => void) | null) = null;\n    if (sharedWebSockets[url] === undefined) {\n      sharedWebSockets[url] = optionsRef.current.eventSourceOptions ?\n        new EventSource(url, optionsRef.current.eventSourceOptions) :\n        new WebSocket(url, optionsRef.current.protocols);\n      webSocketRef.current = sharedWebSockets[url];\n      setReadyState(ReadyState.CONNECTING);\n      clearSocketIoPingInterval = attachSharedListeners(\n        sharedWebSockets[url],\n        url,\n        optionsRef,\n        sendMessage,\n      );\n    } else {\n      webSocketRef.current = sharedWebSockets[url];\n      setReadyState(sharedWebSockets[url].readyState);\n    }\n\n    const subscriber: Subscriber = {\n      setLastMessage,\n      setReadyState,\n      optionsRef,\n      reconnectCount,\n      reconnect: startRef,\n    };\n  \n    addSubscriber(url, subscriber);\n\n    return cleanSubscribers(\n      url,\n      subscriber,\n      optionsRef,\n      setReadyState,\n      clearSocketIoPingInterval,\n    );\n  } else {\n    webSocketRef.current = optionsRef.current.eventSourceOptions ?\n      new EventSource(url, optionsRef.current.eventSourceOptions) :\n      new WebSocket(url, optionsRef.current.protocols);\n    setReadyState(ReadyState.CONNECTING);\n    if (!webSocketRef.current) {\n      throw new Error('WebSocket failed to be created');\n    }\n\n    return attachListeners(\n      webSocketRef.current,\n      {\n        setLastMessage,\n        setReadyState\n      },\n      optionsRef,\n      startRef.current,\n      reconnectCount,\n      sendMessage,\n    );\n  }\n};\n"},"lineCount":null}},"hash":"5ad09113072f65ecf69cae53be2b4ab5","cacheData":{"env":{}}}