{"id":"../node_modules/react-use-websocket/dist/lib/use-socket-io.js","dependencies":[{"name":"/home/sengul/Documents/Projects/Ltc/3dMDWebsocket/react-app-template/node_modules/react-use-websocket/dist/lib/use-socket-io.js.map","includedInParent":true,"mtime":1679124831168},{"name":"/home/sengul/Documents/Projects/Ltc/3dMDWebsocket/react-app-template/node_modules/react-use-websocket/src/lib/use-socket-io.ts","includedInParent":true,"mtime":1679124831180},{"name":"/home/sengul/Documents/Projects/Ltc/3dMDWebsocket/react-app-template/package.json","includedInParent":true,"mtime":1679124831384},{"name":"/home/sengul/Documents/Projects/Ltc/3dMDWebsocket/react-app-template/.babelrc","includedInParent":true,"mtime":1637703918124},{"name":"/home/sengul/Documents/Projects/Ltc/3dMDWebsocket/react-app-template/node_modules/react-use-websocket/package.json","includedInParent":true,"mtime":1679124831164},{"name":"react","loc":{"line":15,"column":22,"index":512},"parent":"/home/sengul/Documents/Projects/Ltc/3dMDWebsocket/react-app-template/node_modules/react-use-websocket/dist/lib/use-socket-io.js","resolved":"/home/sengul/Documents/Projects/Ltc/3dMDWebsocket/react-app-template/node_modules/react/index.js"},{"name":"./use-websocket","loc":{"line":16,"column":30,"index":552},"parent":"/home/sengul/Documents/Projects/Ltc/3dMDWebsocket/react-app-template/node_modules/react-use-websocket/dist/lib/use-socket-io.js","resolved":"/home/sengul/Documents/Projects/Ltc/3dMDWebsocket/react-app-template/node_modules/react-use-websocket/dist/lib/use-websocket.js"},{"name":"./constants","loc":{"line":17,"column":26,"index":598},"parent":"/home/sengul/Documents/Projects/Ltc/3dMDWebsocket/react-app-template/node_modules/react-use-websocket/dist/lib/use-socket-io.js","resolved":"/home/sengul/Documents/Projects/Ltc/3dMDWebsocket/react-app-template/node_modules/react-use-websocket/dist/lib/constants.js"}],"generated":{"js":"\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useSocketIO = void 0;\nvar react_1 = require(\"react\");\nvar use_websocket_1 = require(\"./use-websocket\");\nvar constants_1 = require(\"./constants\");\nvar emptyEvent = {\n    type: 'empty',\n    payload: null,\n};\nvar getSocketData = function (event) {\n    if (!event || !event.data) {\n        return emptyEvent;\n    }\n    var match = event.data.match(/\\[.*]/);\n    if (!match) {\n        return emptyEvent;\n    }\n    var data = JSON.parse(match);\n    if (!Array.isArray(data) || !data[1]) {\n        return emptyEvent;\n    }\n    return {\n        type: data[0],\n        payload: data[1],\n    };\n};\nexports.useSocketIO = function (url, options, connect) {\n    if (options === void 0) { options = constants_1.DEFAULT_OPTIONS; }\n    if (connect === void 0) { connect = true; }\n    var optionsWithSocketIO = react_1.useMemo(function () { return (__assign(__assign({}, options), { fromSocketIO: true })); }, []);\n    var _a = use_websocket_1.useWebSocket(url, optionsWithSocketIO, connect), sendMessage = _a.sendMessage, sendJsonMessage = _a.sendJsonMessage, lastMessage = _a.lastMessage, readyState = _a.readyState, getWebSocket = _a.getWebSocket;\n    var socketIOLastMessage = react_1.useMemo(function () {\n        return getSocketData(lastMessage);\n    }, [lastMessage]);\n    return {\n        sendMessage: sendMessage,\n        sendJsonMessage: sendJsonMessage,\n        lastMessage: socketIOLastMessage,\n        lastJsonMessage: socketIOLastMessage,\n        readyState: readyState,\n        getWebSocket: getWebSocket,\n    };\n};\n","map":{"version":3,"file":"use-socket-io.js","sourceRoot":"","sources":["../../src/lib/use-socket-io.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA,+BAA+B;AAC/B,iDAA8C;AAC9C,yCAA6C;AAQ7C,IAAM,UAAU,GAAwB;IACtC,IAAI,EAAE,OAAO;IACb,OAAO,EAAE,IAAI;CACd,CAAA;AAED,IAAM,aAAa,GAAG,UAAC,KAA0C;IAC/D,IAAI,CAAC,KAAK,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE;QACzB,OAAO,UAAU,CAAA;KAClB;IAED,IAAM,KAAK,GAAG,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAA;IAEvC,IAAI,CAAC,KAAK,EAAE;QACV,OAAO,UAAU,CAAA;KAClB;IAED,IAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAA;IAE9B,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE;QACpC,OAAO,UAAU,CAAA;KAClB;IAED,OAAO;QACL,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC;QACb,OAAO,EAAE,IAAI,CAAC,CAAC,CAAC;KACjB,CAAA;AACH,CAAC,CAAA;AAEY,QAAA,WAAW,GAAG,UACzB,GAAqD,EACrD,OAAkC,EAClC,OAAuB;IADvB,wBAAA,EAAA,UAAmB,2BAAe;IAClC,wBAAA,EAAA,cAAuB;IAEvB,IAAM,mBAAmB,GAAG,eAAO,CAAC,cAAM,OAAA,uBACrC,OAAO,KACV,YAAY,EAAE,IAAI,IAClB,EAHwC,CAGxC,EAAE,EAAE,CAAC,CAAA;IAED,IAAA,KAMF,4BAAY,CAEd,GAAG,EACH,mBAAmB,EACnB,OAAO,CACR,EAVC,WAAW,iBAAA,EACX,eAAe,qBAAA,EACf,WAAW,iBAAA,EACX,UAAU,gBAAA,EACV,YAAY,kBAMb,CAAC;IAEF,IAAM,mBAAmB,GAAG,eAAO,CAAC;QAClC,OAAA,aAAa,CAAC,WAAW,CAAC;IAA1B,CAA0B,EAAE,CAAC,WAAW,CAAC,CAAC,CAAC;IAE7C,OAAO;QACL,WAAW,aAAA;QACX,eAAe,iBAAA;QACf,WAAW,EAAE,mBAAmB;QAChC,eAAe,EAAE,mBAAmB;QACpC,UAAU,YAAA;QACV,YAAY,cAAA;KACb,CAAC;AACJ,CAAC,CAAA","sourcesContent":["import { useMemo } from 'react'\nimport { useWebSocket } from './use-websocket'\nimport { DEFAULT_OPTIONS } from './constants'\nimport { Options, WebSocketHook } from './types';\n\nexport interface SocketIOMessageData {\n  type: string,\n  payload: any,\n}\n\nconst emptyEvent: SocketIOMessageData = {\n  type: 'empty',\n  payload: null,\n}\n\nconst getSocketData = (event: WebSocketEventMap['message'] | null): SocketIOMessageData => {\n  if (!event || !event.data) {\n    return emptyEvent\n  }\n\n  const match = event.data.match(/\\[.*]/)\n\n  if (!match) {\n    return emptyEvent\n  }\n\n  const data = JSON.parse(match)\n\n  if (!Array.isArray(data) || !data[1]) {\n    return emptyEvent\n  }\n\n  return {\n    type: data[0],\n    payload: data[1],\n  }\n}\n\nexport const useSocketIO = (\n  url: string | (() => string | Promise<string>) | null,\n  options: Options = DEFAULT_OPTIONS,\n  connect: boolean = true,\n): WebSocketHook<SocketIOMessageData> => {\n  const optionsWithSocketIO = useMemo(() => ({\n    ...options,\n    fromSocketIO: true,\n  }), [])\n\n  const {\n    sendMessage,\n    sendJsonMessage,\n    lastMessage,\n    readyState,\n    getWebSocket,\n  } = useWebSocket(\n\n    url,\n    optionsWithSocketIO,\n    connect,\n  );\n\n  const socketIOLastMessage = useMemo(() =>\n    getSocketData(lastMessage), [lastMessage]);\n\n  return {\n    sendMessage,\n    sendJsonMessage,\n    lastMessage: socketIOLastMessage,\n    lastJsonMessage: socketIOLastMessage,\n    readyState,\n    getWebSocket,\n  };\n}\n"]}},"hash":"098acb0c09a63e70f6f943df53dfbb72","cacheData":{"env":{}}}